var Router=window.ReactRouter,Route=Router.Route,DefaultRoute=Router.DefaultRoute,RouteHandler=Router.RouteHandler,Link=Router.Link,SearchMixin={getInitialState:function(){return{results:[]}},search:function(a){var b=this;$.getJSON("http://embedr.eu/search/?query="+a,function(a){b.setState({results:a.hits})})}},App=React.createClass({displayName:"App",render:function(){return React.createElement(RouteHandler,null)}}),Search=React.createClass({displayName:"Search",mixins:[SearchMixin],select:function(a){this.setState({selected:!0,results:[],id:a})},render:function(){return React.createElement("div",{className:"search"},React.createElement(ResultList,{results:this.state.results}),React.createElement(HomeHeader,{search:this.search}))}}),HomeHeader=React.createClass({displayName:"HomeHeader",render:function(){return React.createElement("div",{className:"header"},React.createElement("div",{className:"header__title"},React.createElement("h1",{className:"header__title__name"},"embedr"),React.createElement("p",{className:"header__title__text"},"High quality cultural heritage image embedding")),React.createElement("ul",{className:"header__navigation"},React.createElement("li",null,React.createElement("a",{href:"#"},"about")),React.createElement("li",null,React.createElement("a",{href:"#"},"contact"))),React.createElement(SearchBar,{search:this.props.search}))}}),SearchBar=React.createClass({displayName:"SearchBar",getInitialState:function(){return{showAdvanced:!1}},showAdvanced:function(a){this.setState({showAdvanced:!this.state.showAdvanced})},handleChange:function(a){var b=a.target.value;this.props.search(b)},render:function(){return React.createElement("div",{className:"search_box"},React.createElement("div",{className:"search__advanced",onClick:this.showAdvanced},"advanced search"),React.createElement("input",{className:"search_bar",placeholder:"Search",onChange:this.handleChange}),React.createElement("div",{className:"search__button"}),this.state.showAdvanced?React.createElement(AdvancedSearch,{close:this.showAdvanced}):null)}}),AdvancedSearch=React.createClass({displayName:"AdvancedSearch",render:function(){return React.createElement("div",{className:"search__advanced__box"},React.createElement("div",{className:"close_button",onClick:this.props.close},"X"),React.createElement("ul",null,React.createElement(AdvancedOption,{value:"any"},"any license"),React.createElement(AdvancedOption,{value:"all"},"all creative commons"),React.createElement(AdvancedOption,{value:"commercial"},"commercial use allowed"),React.createElement(AdvancedOption,{value:"modification"},"commercial use and modifictions allowed"),React.createElement(AdvancedOption,{value:"unknown"},"no known copyright restrictions")))}}),AdvancedOption=React.createClass({displayName:"AdvancedOption",render:function(){var a="license"+this.props.value;return React.createElement("li",null,React.createElement("label",null,React.createElement("input",{type:"radio",name:"license",id:a,value:this.props.value}),this.props.children))}}),ResultList=React.createClass({displayName:"ResultList",render:function(){if(0==this.props.results.length)return null;var a=this.props.results.map(function(a){return React.createElement(Result,{key:a.id,result:a})}.bind(this));return React.createElement("div",{className:"results__overlay"},React.createElement("div",{className:"results"},a))}}),Result=React.createClass({displayName:"Result",getInitialState:function(){return{buttonClass:"is_hidden",showPopup:!1}},mouseOver:function(){this.setState({buttonClass:"is_shown"})},mouseOut:function(){this.setState({buttonClass:"is_hidden"})},click:function(){this.props.select(this.props.id)},togglePopup:function(a){a.preventDefault(),this.setState({showPopup:!this.state.showPopup})},render:function(){return React.createElement("div",{className:"result",onMouseOver:this.mouseOver,onMouseOut:this.mouseOut},this.state.showPopup?React.createElement(EmbedPopup,{id:this.props.result.id,close:this.togglePopup}):null,React.createElement("div",{className:this.state.buttonClass},React.createElement(EmbedButton,{togglePopup:this.togglePopup})),React.createElement(Link,{to:"detail",params:{id:this.props.result.id}},React.createElement(IIIFImage,{server:"http://iiifhawk.klokantech.com",id:this.props.result.id,size:"150,150"})),React.createElement("p",{className:"result__description"},this.props.result.fields.title[0]))}}),EmbedButton=React.createClass({displayName:"EmbedButton",render:function(){return React.createElement("a",{className:"button__embed",href:"#",onClick:this.props.togglePopup},"</>")}}),EmbedPopup=React.createClass({displayName:"EmbedPopup",render:function(){return React.createElement("div",{className:"embed__popup"},React.createElement("div",{className:"close_button",onClick:this.props.close},"X"),React.createElement("strong",null,"Dit beeld embedden"),React.createElement("p",null,"Kopieer onderstaande code naar je website of blog. ",React.createElement("a",{href:"#"},"Meer informatie.")),React.createElement("textarea",{className:"embed__box",rows:"6"}),React.createElement("a",{className:"button__copy"},"kopieer"),React.createElement("div",null,React.createElement("label",null,"Toon preview")),React.createElement(IIIFImage,{server:"http://iiifhawk.klokantech.com",id:this.props.id,size:"400,150"}))}}),IIIFImage=React.createClass({displayName:"IIIFImage",makeSource:function(){var a=this.props.server,b=this.props.id,c=this.props.region||"full",d=this.props.size||"1000,",e=this.props.rotation||"0",f=this.props.quality||"native",g=this.props.format||"jpg";return a+"/"+b+"/"+c+"/"+d+"/"+e+"/"+f+"."+g},render:function(){var a=this.makeSource();return React.createElement("img",{src:a})}}),Detail=React.createClass({displayName:"Detail",mixins:[SearchMixin],render:function(){return React.createElement("div",{className:"detail"},React.createElement(OpenSeaDragon,{id:this.props.params.id}),React.createElement(ResultList,{results:this.state.results}),React.createElement(DetailHeader,{search:this.search}))}}),DetailHeader=React.createClass({displayName:"DetailHeader",render:function(){return React.createElement("div",{className:"header detail"},React.createElement("div",{className:"header__title"},React.createElement("h1",{className:"header__title__name"},"embedr")),React.createElement("ul",{className:"header__navigation"},React.createElement("li",null,React.createElement("a",{href:"#"},"about")),React.createElement("li",null,React.createElement("a",{href:"#"},"contact"))),React.createElement(SearchBar,{search:this.props.search}))}}),OpenSeaDragon=React.createClass({displayName:"OpenSeaDragon",getInitialState:function(){return{showPopup:!1}},componentDidMount:function(){$.getJSON("http://embedhawk.klokantech.com/"+this.props.id+"/manifest.json",function(a){var b=a.sequences[0].canvases[0],c=b.height,d=b.width;OpenSeadragon({id:"detail__image",showNavigationControl:!1,zoomInButton:"button__zoom",tileSources:[{"@context":"http://iiif.io/api/image/2/context.json","@id":"http://iiifhawk.klokantech.com/"+this.props.id,filename:this.props.id+".jp2",height:c,order:0,profile:["http://iiif.io/api/image/2/level1.json",{formats:["jpg"],qualities:["native","color","gray"],supports:["regionByPct","sizeByForcedWh","sizeByWh","sizeAboveFull","rotationBy90s","mirroring","gray"]}],protocol:"http://iiif.io/api/image",tiles:[{height:256,scaleFactors:[1,2,4,8],width:256}],width:d}]})}.bind(this))},togglePopup:function(a){a.preventDefault(),this.setState({showPopup:!this.state.showPopup})},render:function(){return React.createElement("div",{className:"detail__main"},React.createElement("div",{id:"detail__image"}),React.createElement(EmbedButton,{togglePopup:this.togglePopup}),this.state.showPopup?React.createElement(EmbedPopup,{id:this.props.id,close:this.togglePopup}):null,React.createElement("a",{id:"button__zoom",className:"button__zoom"},"+"))}}),routes=React.createElement(Route,{path:"/",handler:App},React.createElement(DefaultRoute,{handler:Search}),React.createElement(Route,{name:"detail",path:"/:id",handler:Detail}));Router.run(routes,function(a){React.render(React.createElement(a,null),document.getElementById("search"))}),function(){}.call(this);